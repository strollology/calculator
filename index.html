<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Fatigue Factor Calculator</title>
  </head>
  <body>
    <h1>Fatigue Factor Calculator</h1>
    <form>
      <label for="test300mSeconds">Test time for 300m (in seconds):</label>
      <input type="text" id="test300mSeconds" name="test300mSeconds" /><br />

      <label for="test1_5mileSeconds"
        >Test time for 1.5 miles (in minutes and seconds, separated by colon):</label
      >
      <input
        type="text"
        id="test1_5mileMinutes"
        name="test1_5mileMinutes"
        size="2"
      />
      :
      <input
        type="text"
        id="test1_5mileSeconds"
        name="test1_5mileSeconds"
        size="2"
      />
      <br />
      <button type="button" id="calculateButton">Calculate</button>
    </form>
    <div id="errorDiv"></div>
    <div id="resultDiv"></div>
    <script>
      const calculateButton = document.getElementById("calculateButton");
      const resultDiv = document.getElementById("resultDiv");
      const errorDiv = document.getElementById("errorDiv");

      calculateButton.addEventListener("click", function () {
        const test300mSeconds = parseFloat(
          document.getElementById("test300mSeconds").value
        );
        const test1_5mileMinutes = parseInt(
          document.getElementById("test1_5mileMinutes").value
        );
        const test1_5mileSeconds = parseInt(
          document.getElementById("test1_5mileSeconds").value
        );

        if (
          isNaN(test300mSeconds) ||
          isNaN(test1_5mileMinutes) ||
          isNaN(test1_5mileSeconds)
        ) {
          errorDiv.textContent = "Please enter valid numbers";
          resultDiv.textContent = "";
          return;
        }

        const test1_5mileSecondsTotal = test1_5mileMinutes * 60 + test1_5mileSeconds;

        const fatigueFactor =
          Math.log(test1_5mileSecondsTotal / test300mSeconds) /
          Math.log(300 / (1609 * 1.5));

        const fatigueFactorPercent = (fatigueFactor - 1) * 100;
        resultDiv.textContent =
          "Fatigue Factor: " + fatigueFactorPercent.toFixed(1) + "%" + " (Optimal: 20-21%)";
        errorDiv.textContent = "";
      });
    </script>
  </body>
</html>
