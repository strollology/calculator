<html>
  <head>
    <title>Fatigue Factor Calculator</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <h1>Fatigue Factor Calculator</h1>
    <form>
      <label for="test-time-300">Test Time for 300m (mm:ss)</label>
      <input type="text" id="test-time-300" required />
      <br />
      <label for="test-time-1.5-miles">Test Time for 1.5 Miles (mm:ss)</label>
      <input type="text" id="test-time-1.5-miles" required />
      <br />
      <button id="calculate-button" type="submit">Calculate</button>
    </form>
    <div id="result"></div>
    <div id="error"></div>
    <script>
      const form = document.querySelector("form");
      const resultDiv = document.getElementById("result");
      const errorDiv = document.getElementById("error");

      form.addEventListener("submit", function (event) {
        event.preventDefault();
        errorDiv.textContent = "";

        const testTime300Input = document.getElementById("test-time-300");
        const testTime1_5MilesInput = document.getElementById(
          "test-time-1.5-miles"
        );

        const testTime300 = testTime300Input.value;
        const testTime1_5Miles = testTime1_5MilesInput.value;

        if (!isValidTime(testTime300) || !isValidTime(testTime1_5Miles)) {
          errorDiv.textContent = "Invalid time format. Please use mm:ss.";
          resultDiv.textContent = "";
          return;
        }

        const fatigueFactor = calculateFatigueFactor(
          convertTimeToSeconds(testTime300),
          convertTimeToSeconds(testTime1_5Miles)
        );

        resultDiv.textContent = `Fatigue Factor: ${fatigueFactor.toFixed(
          1
        )}% (Optimal: 20-21%)`;
      });

      function isValidTime(timeString) {
        return /^\d{1,2}:\d{2}$/.test(timeString);
      }

      function convertTimeToSeconds(timeString) {
        const [minutes, seconds] = timeString.split(":");
        return parseInt(minutes) * 60 + parseInt(seconds);
      }

      function calculateFatigueFactor(testTime300, testTime1_5Miles) {
        return (
          (Math.log(testTime300 / testTime1_5Miles) /
            Math.log(300 / (1609 * 1.5))) *
          100
        );
      }
    </script>
  </body>
</html>
